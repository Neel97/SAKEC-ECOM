<!DOCTYPE html>
<html>
<head>
	<title>SAKEC-e-CHAAT</title>
	<meta name="viewport" content="width=device-width, inital-scale=1">
	<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="assets/css/materialize.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/nouislider.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body id="index">
	<a href="javascript:" id="return-to-top"><i class="material-icons">navigation</i></a>
	<a href="#cart" id="cart" class="blue lighten-1 hide user">
		<i class="fa fa-shopping-cart"></i>
		<span id="prods-in-cart-count">0</span>
		<ul class="hide" id="prods-to-card-id">
		</ul>
	</a>
	<header class="navbar-fixed z-depth-3" id="">
		<nav class="white lighten-4" role="navigation">
			<div class="nav-wrapper">
				<a href="#" class="nav brand-logo"> SAKEC-e-CHAAT </a>
				<a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
				<div class="right hide-on-med-and-down acc_area">
					<div class="show guest" style="margin-top: -5px;">
						<a href="#loginModal" class="modal-trigger btn blue blue lighten-2">Login</a>
						<a href="#signupModal" class="modal-trigger btn blue lighten-2">Sign Up</a>
					</div>
					<div class="hide user">
						<a class="btn blue lighten-2" style="margin-top: -5px">
							<i class="fa fa-user" style="line-height: 0;"></i>
							<span class="username"></span>
						</a>
						<a href="php/logout.php" class="btn blue lighten-2" style="margin-top: -5px">
							<span id="logout">Logout</span>
						</a>
					</div>
				</div>
				<ul class="right hide-on-med-and-down">
					<li><a href="#products" class="head-link">Order</a></li>
					<li><a href="#reviews" class="head-link">Reviews</a></li>
					<li><a href="#contact-us" class="head-link">Contact us</a></li>
				</ul>
			</div>
		</nav>		
		<ul id="mobile-demo" class="sidenav">
			<li>
				<div class="acc_area">
					<div class="show guest" style="margin-top: -5px;">
						<a href="#loginModal" class="modal-trigger btn blue blue lighten-2">Login</a>
						<a href="#signupModal" class="modal-trigger btn blue lighten-2">Sign Up</a>
					</div>
					<div class="hide user">
						<a class="btn blue lighten-2" style="margin-top: -5px">
							<i class="fa fa-user" style="line-height: 0;"></i>
							<span class="username"></span>
						</a>
						<a href="php/logout.php" class="btn blue lighten-2" style="margin-top: -5px">
							<span id="logout">Logout</span>
						</a>
					</div>
				</div>
			</li>
			<li><a href="#products" class="head-link">Order</a></li>
			<li><a href="#reviews" class="head-link">Reviews</a></li>
			<li><a href="#contact-us" class="head-link">Contact us</a></li>
		</ul>
	</header>

	<div class="section" id="home-section">
		<div class="section-content">
			<div class="row">
				<h2 class="col s12 light white-text" id="heading-title">SAKEC-e-CHAAT</h2>
				<h5 class="col s12 light" id="heading-phrase">A modern way to eat chaat.</h5>
			</div>
			<!-- <div class="row" id="login-or-signup">
				<h5><a href="#loginModal" class="white-text modal-trigger"><u>Login</u></a> | <a href="#signupModal" class="white-text modal-trigger"><u>Sign Up</u></a></h5>
			</div> -->
		</div>
		<div id="landing-pg-img"></div>
	</div>

	<div class="section" id="products">
		<div class="section-title">
			<span>Jo Khana hai Khao</span>
		</div>
		<div class="section-content">
			<div class="row sub-section">
				<!-- <div class="sub-section-title">Filter options</div> -->
				<div class="sub-section-content">
					<div id="filters row">
						<div class="input-field filter-option col l4 s12">
							<select>
								<option value="" disabled selected>Categories</option>
								<option value="1">Mumbai Chaats</option>
								<option value="2">Lucknow Chaats</option>
								<option value="3">Sab Kuch</option>
							</select>
						</div>
						<div class="filter-option col l4 s12">
							<div class="input-field col s12">
								<i class="material-icons prefix">search</i>
								<input type="text" id="autocomplete-input" class="autocomplete">
								<label for="autocomplete-input">Autocomplete</label>
							</div>
						</div>
						<div class="input-field filter-option col l4 s12">
							<p style="margin-top: 5px;">
								<span class="left price-range-tag"><i class="fa fa-rupee"></i>50</span>
								<span class="right price-range-tag"><i class="fa fa-rupee"></i>500</span>
								<input type="range" id="test5" min="50" max="500" />
							</p>
						</div>
					</div>
				</div>
			</div>
			<div class="sub-section">
				<div class="sub-section-title"></div>
				<div class="sub-section-content">
					<ul id="product-items">
						<li class="p-item col l3 m4 s12">
							<div class="card">
								<div class="card-image">
									<img src="assets/img/landing-pg-img.jpg">
									<a class="btn-floating halfway-fab waves-effect waves-light red" id="add-to-cart" data-product-id="1"><i class="fa fa-cart-plus"></i></a>
								</div>
								<div class="card-content p-item-desc">
									<span class="card-title prod-name">Sev Puri <span class="prod-price"><i class="fa fa-rupee"></i>50</span></span>
									<div class="prod-star">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star-half"></i>
									</div>
								</div>
							</div>
						</li>
						<li class="p-item col l3 m4 s12">
							<div class="card">
								<div class="card-image">
									<img src="assets/img/landing-pg-img.jpg">
									<a class="btn-floating halfway-fab waves-effect waves-light red" id="add-to-cart" data-product-id="1"><i class="fa fa-cart-plus"></i></a>
								</div>
								<div class="card-content p-item-desc">
									<span class="card-title prod-name">Sev Puri <span class="prod-price"><i class="fa fa-rupee"></i>50</span></span>
									<div class="prod-star">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star-half"></i>
									</div>
								</div>
							</div>
						</li>
						<li class="p-item col l3 m4 s12">
							<div class="card">
								<div class="card-image">
									<img src="assets/img/landing-pg-img.jpg">
									<a class="btn-floating halfway-fab waves-effect waves-light red" id="add-to-cart" data-product-id="1"><i class="fa fa-cart-plus"></i></a>
								</div>
								<div class="card-content p-item-desc">
									<span class="card-title prod-name">Sev Puri <span class="prod-price"><i class="fa fa-rupee"></i>50</span></span>
									<div class="prod-star">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star-half"></i>
									</div>
								</div>
							</div>
						</li>
						<li class="p-item col l3 m4 s12">
							<div class="card">
								<div class="card-image">
									<img src="assets/img/landing-pg-img.jpg">
									<a class="btn-floating halfway-fab waves-effect waves-light red" id="add-to-cart" data-product-id="1"><i class="fa fa-cart-plus"></i></a>
								</div>
								<div class="card-content p-item-desc">
									<span class="card-title prod-name">Sev Puri <span class="prod-price"><i class="fa fa-rupee"></i>50</span></span>
									<div class="prod-star">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star-half"></i>
									</div>
								</div>
							</div>
						</li>
						<li class="p-item col l3 m4 s12">
							<div class="card">
								<div class="card-image">
									<img src="assets/img/landing-pg-img.jpg">
									<a class="btn-floating halfway-fab waves-effect waves-light red" id="add-to-cart" data-product-id="1"><i class="fa fa-cart-plus"></i></a>
								</div>
								<div class="card-content p-item-desc">
									<span class="card-title prod-name">Sev Puri <span class="prod-price"><i class="fa fa-rupee"></i>50</span></span>
									<div class="prod-star">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star-half"></i>
									</div>
								</div>
							</div>
						</li>
						
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div class="section" id="reviews">
		<div class="section-title">Reviews</div>
		<div class="section-content">
			<div class="row">
				<div class="carousel">
					<a class="carousel-item comment" href="#one!">
						<div class="comment-msg">
							<span class="quote"><sup><i class="fa fa-quote-left"></i></sup></span>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.<span class="quote"><sup><i class="fa fa-quote-right"></i></sup></span>
						</div>
						<div class="commentor">
							<span class="name">- John DOE</span>
						</div>
					</a>
					<a class="carousel-item comment" href="#one!">
						<div class="comment-msg">
							<span class="quote"><sup><i class="fa fa-quote-left"></i></sup></span>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.<span class="quote"><sup><i class="fa fa-quote-right"></i></sup></span>
						</div>
						<div class="commentor">
							<span class="name">- John DOE</span>
						</div>
					</a>
					<a class="carousel-item comment" href="#one!">
						<div class="comment-msg">
							<span class="quote"><sup><i class="fa fa-quote-left"></i></sup></span>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.<span class="quote"><sup><i class="fa fa-quote-right"></i></sup></span>
						</div>
						<div class="commentor">
							<span class="name">- John DOE</span>
						</div>
					</a>
					<a class="carousel-item comment" href="#one!">
						<div class="comment-msg">
							<span class="quote"><sup><i class="fa fa-quote-left"></i></sup></span>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.<span class="quote"><sup><i class="fa fa-quote-right"></i></sup></span>
						</div>
						<div class="commentor">
							<span class="name">John DOE</span>
						</div>
					</a>
					<a class="carousel-item comment" href="#one!">
						<div class="comment-msg">
							<span class="quote"><sup><i class="fa fa-quote-left"></i></sup></span>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.<span class="quote"><sup><i class="fa fa-quote-right"></i></sup></span>
						</div>
						<div class="commentor">
							<span class="name">- John DOE</span>
						</div>
					</a>
				</div>
			</div>
		</div>
	</div>

	<footer id="contact-us">
		abc@gmail.com
	</footer>
	<!-- Modals -->
	<div id="loginModal" class="modal">
		<div class="modal-header"><br /><br />
			<h2 class="center">Login</h2>
		</div>
		<div class="modal-content">
			<div class="row">
				<div class="col s12">
					<br /><br /><br />
					<form method="post" name="loginForm" id="loginForm">
						<div class="input-field col s12">
							<label for="uname">Username: </label>
							<input type="text" id="uname" name="uname" data-error=".errorUname" aria-required="true" aria-invalid="true" class="error" aria-describedby="uname-error" />
							<div class="errorUname">
								<div id="uname-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12">
							<input type="password" class="validate" id="pass" name="pass" data-error=".errorLogPass" aria-required="true" aria-invalid="true" class="error" aria-describedby="logPass-error"/>
							<label for="pass">Password: </label>
							<div class="errorLogPass">
								<div id="logPass-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12 center">
							<button type="button" class="btn waves-effect waves-light blue" id="loginBtn">Log-in</button>
							<h6 class="error center" id="loginErr" style="display: none;"><i class="material-icons ">error_outline</i><br /> Invalid Username or password!!!</h6>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div id="signupModal" class="modal">
		<div class="modal-header"><br /><br />
			<h2 class="center">Signup</h2>
		</div>
		<div class="modal-content">
			<div class="row">
				<div class="col s12">
					<br /><br /><br />
					<form method="post" name="signup">
						<div class="input-field col s12">
							<input type="text" class="validate" id="suname" name="suname" data-error=".errorUname" aria-required="true" aria-invalid="true" class="error" aria-describedby="uname-error" />
							<label for="uname">Username: </label>
							<div class="errorUname">
								<div id="uname-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12">
							<input type="password" class="validate" id="spass" name="spass"  data-error=".errorPass" aria-required="true" aria-invalid="true" class="error" aria-describedby="pass-error" />
							<label for="pass">Password: </label>
							<div class="errorPass">
								<div id="pass-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12">
							<input type="password" class="validate" id="re_pass" name="re_pass" data-error=".errorRePass" aria-required="true" aria-invalid="true" class="error" aria-describedby="re-pass-error" />
							<label for="re-pass">Re-Password: </label>
							<div class="errorRePass">
								<div id="re-pass-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12">
							<input type="email" class="validate" id="rec_email" name="rec_email"  data-error=".errorEmail" aria-required="true" aria-invalid="true" class="error" aria-describedby="email-error"/>
							<label for="recovery-email">Recovery Email: </label>
							<div class="errorEmail">
								<div id="email-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12">
							<p>
								<label>
									<input type="checkbox" />
									<span>I Agree to all the Terms & Conditions* </span>
								</label>
							</p>
							<div class="errorChkBox">
								<div id="chkbox-error" class="error"></div>
							</div>
						</div>
						<div class="input-field col s12 center"><br /><br />
							<button type="button" class="btn waves-effect waves-light blue" id="signupBtn" >Sign-Up</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<script src="assets/js/jquery-3.1.1.min.js"></script>
	<script src="assets/js/materialize.min.js"></script>
	<script src="assets/js/nouislider.min.js"></script>
	<script src="assets/js/jquery.validate.min.js"></script>
	<script src="assets/js/validateSignUp.js"></script>
	<script src="assets/js/validateLogin.js"></script>
	<script>

		// ===== Scroll to Top ==== 
		$(window).scroll(function() {
		    if ($(this).scrollTop() >= 50) {        // If page is scrolled more than 50px
		        $('#return-to-top').fadeIn(200);    // Fade in the arrow
		    } else {
		        $('#return-to-top').fadeOut(200);   // Else fade out the arrow
		    }
		});
		
		$('#return-to-top').click(function() {      // When arrow is clicked
			$('body,html').animate({
		        scrollTop : 0                       // Scroll to top of body
		    }, 1000);
		});

		function isUserLoggedIn(){
			$.ajax({
				url: 'php/RequestHandler.php?requestFor=usrLogInCheck',
				dataType: 'json',
				success: function(res){
					if(res['status'] == 200){
						$('.username').html(res['uname']);
						$('.guest').addClass('hide');
						$('.user').removeClass('hide');
					}
					else{
						console.log(res);
						$('#loginErr').show();
					}
				}
			});
		}

		$(document).ready(function(){
			isUserLoggedIn();
			$('.sidenav').sidenav();
			$('.dropdown-trigger').dropdown();
			$('input.autocomplete').autocomplete({
				data: {
					"Apple": null,
					"Microsoft": null,
					"Google": 'assets/img/landing-pg-img.jpg'
				},
			});
			$('.carousel').carousel({
				indicators: true,
				fullWidth: true
			});
			$('select').formSelect();
			/*var slider = document.getElementById('price-slider');
			noUiSlider.create(slider, {
				start: [20, 80],
				connect: true,
				step: 1,
				orientation: 'horizontal', 
				range: {
					'min': 0,
					'max': 100
				}
			});*/

			$('#add-to-cart').click(function(e){
				var prod_id = $(this).data('product-id');
				$('#prods-to-card-id').append("<li>" + prod_id + "</li>");
				$('#prods-in-cart-count').text(parseInt($('#prods-in-cart-count').text())+1);
			});

			$('#loginModal').modal({
				opacity: .6, 
				inDuration: 1500, 
				outDuration: 3000, 
			});

			$('#signupModal').modal({
				opacity: .6, 
				inDuration: 1500, 
				outDuration: 3000, 
			});

			$('.head-link, .footer-link').click(function(e){
				e.preventDefault();

				var goto = $(this).attr("href");
				console.log(goto);
				$('html, body').animate({
					scrollTop: (goto == '#index'? 0: $(goto).offset().top-79)
				}, 1500);
			});

			$('#loginBtn').click(function(){
				$('loginErr').hide();
				if($('form[name="loginForm"]').valid()){
					$.ajax({
						url: 'php/RequestHandler.php?requestFor=usrLogIn',
						dataType: 'json',
						data: new FormData(document.querySelector('form[name="loginForm"]')),
						type: 'POST',
						processData: false,
						contentType: false,
						success: function(res){
							if(res['status'] == 200){
								$('#loginModal').modal('close');
								$('.username').html(res['uname']);
								$('.guest').addClass('hide');
								$('.user').removeClass('hide');
								// console.log(res);
							}
							else{
								console.log(res);
								$('#loginErr').show();
							}
						}
					});
				}

			});

			$('#signupBtn').click(function(){
				if($('form[name="signup"]').valid()){
					var frmDataObj = new FormData(document.querySelector('form[name="signup"]'));
					jQuery.ajax({
						url: 'php/RequestHandler.php?requestFor=newUsr',
						dataType: 'json',
						data: frmDataObj,
						type: 'POST',
						processData: false,
						contentType: false,
						success: function(res){
							if(res['status'] == 200){
								$('#signupModal').modal('close');
								alert('user created sucesfuly.');
								// location.reload();
								console.log(res);
							}else{
								console.log(res['err']);
							}
						}

					});
				}
			});
		});
	</script>
</body>
</html>